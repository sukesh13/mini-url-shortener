<!DOCTYPE html>
<html>
    <head>
        <title>Home page</title>
        <style>
            body {
                font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            }
            button{
                height:2rem;
                width: 5rem;
            }
            div{
                display: flex;
                width: 30%;
                justify-content:space-between;
            }
        </style>
    </head>
    <body>
        <h1>URL shortener</h1>
        <div>
            <%if(locals.shortId){%>
                <p>URL generated : https://localhost:8001/url<%=shortId%></p>
            <%}%>
            <form method="post" action="/url">
                <label for="orgUrl">Enter your original URL:</label>
                <input 
                id="orgUrl" 
                type="text" 
                name="url" 
                placeholder="https://example.com"/>
                <input type="submit" name="submit" value="generate"/>
            </form>
        </div>
        <div>
            <% if(locals.urls){%>
                <table>
                    <thead>
                        <th>S.No</th>
                        <th>ShortId</th>
                        <th>Redirect URL</th>
                        <th>Clicks</th>
                    </thead>
                    <tbody>
                        <% urls.forEach((url,index) => {%>
                            <tr>
                                <td><%=index+1%></td>
                                <td><%=url.shortId%></td>
                                <td><%=url.redirectURL%></td>
                                <td><%=url.visitHistory.length%></td>
                            </tr>
                        <% })%>
                    </tbody>
                </table>
                <%}%>
        </div>
    </body>
</html>